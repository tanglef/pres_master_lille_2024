# Quick word about myself {.unnumbered .unlisted}

* [Master in Biostatistics (Univ. Montpellier)]{.animate__bounceInLeft data-appear-parent="true"}
* [Thesis on label ambiguity in crowdsourcing setting]{.animate__bounceInLeft data-appear-parent="true"}
* [Currently doing a postdoc on Reinforcement learning for citizen data collection]{.animate__bounceInLeft data-appear-parent="true"}
* [Today's goal: explore the world of human-in-the-loop]{.animate__bounceInLeft data-appear-parent="true"}

# ChatGPT training

## How was ChatGPT (at least 3.5) trained?

- very large dataset: (570Gb of text data, 499 B of tokens)

:::::{.columns}
:::{.column width="50%"}

```{ojs}
var Plotly = require('plotly.js-dist');
```

```{ojs}
//| label: dataset-repartition
//| fig-cap: Repartition of the training dataset
//| fig-align: center
{
  var data = [{
      values: [3, 8, 7, 22, 60],
      labels: ["wikipedia", "Books1", "Books2", "Webtext2", "Common Crawl"],
      textinfo: "label+percent",â€¯
      type: "pie",
      marker: {
          colors: ["lightcyan", "cyan", "royalblue", "darkblue", "gold"]
      }
  }];

  var layout = {
    template: 'plotly_light',
    paper_bgcolor: "rgba(0,0,0,0)",
    plot_bgcolor: "rgba(0,0,0,0)",
    font: {
        size: 26,
        color: "white"
    },
    margin: {"t": 0, "b": 0, "l": 0, "r": 0},
    showlegend: false
  };

  const div = document.createElement('div');
  Plotly.newPlot(div, data, layout,{displayModeBar: false});
  return div;
}
```

:::

:::{.column width="50%"}

Underrepresentation on the web means less accuracy and more hallucinations!

- Other data (chosen quality)
- Weighted sampling: *Wikipedia*=5CommonCrawl, Books1=20ComonCrawl,...

Copyright issues, be careful no way to check truthfulness
:::
:::::

## Training with humans

::::{.columns}
:::{.column width="50%"}

![](./images/hrl.png)

:::

:::{.column width="50%"}

:::::{.incremental}

- pretraining (unsupervised learning): fill blanck, attention mechanisms, next word
- fine-tuning (supervised learning): specific dialogues, hyperparameters tuning
- RLHF (reinforcement learning): workers give feedback and possible rewards + exploration

:::::

:::

::::

:::attribution
[\@anthrupad](https://twitter.com/anthrupad)
:::

## Your feedback is informative

:::::{.columns}

::::{.column width="50%"}

```yaml { .animate src="images/hallucinations-human.svg" style="width: 100%; height: 100%" }
setup:
  - element: g[inkscape\:groupmode="layer"]
    modifier: "opacity"
    parameters: [0]
  - element: g[inkscape\:label="Generated"] > path
    modifier: attr
    parameters: [ { "d": "M 300.20352,-500.787593 C 126.77769,161.28468 127.22354,159.90813 127.22354,159.90813 L -300.809962,300.1924466 v 0" } ]
animation:
  -
    - element: g[inkscape\:groupmode="layer"]
      modifier: "opacity"
      parameters: [0]
  -
    - element: g[inkscape\:label="Truth"]
      modifier: "opacity"
      parameters: [1]
  -
    - element: g[inkscape\:label="Likelihood"]
      modifier: "opacity"
      parameters: [1]
  -
    - element: g[inkscape\:label="Common"]
      modifier: "opacity"
      parameters: [1]
  - []
  -
    - element: g[inkscape\:label="Generated"]
      modifier: "opacity"
      parameters: [1]
    - element: g[inkscape\:label="Generated"] > path
      modifier: attr
      duration: 3000
      parameters: [ { "d": "M 156.20352,-49.787593 C 126.77769,161.28468 127.22354,159.90813 127.22354,159.90813 L -24.809962,6.1924466 v 0" } ]
    - element: g[inkscape\:label="Hallucinations"]
      modifier: "opacity"
      duration: 1500
      parameters: [1]
  - []
  -
    - element: g[inkscape\:label="Human"]
      modifier: "opacity"
      parameters: [1]
    - element: g[inkscape\:label="Hallucinations"]
      modifier: "opacity"
      parameters: [0]
    - element: g[inkscape\:label="Generated"]
      modifier: "opacity"
      parameters: [0]
```

::::

::::{.column width="50%"}

[]{.fragment }
[]{.fragment }
[]{.fragment }

```{.plain .fragment}
Give me 2 papers of tibshirani about crowdsourced datasets
```
:::{.cell .output .typewriter1 .fragment }
:::

```{.plain .fragment }
But tibshirani has never worked on crowdsourced datasets
```
:::{.cell .output .typewriter2 .fragment }
:::

::::

:::::

#